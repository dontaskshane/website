<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ¦ </text></svg>">
</head>
<body>
    <header>
        <h1><a href="/">Shane Wetzel</a></h1>
        <button id="invert-toggle" class="invert-toggle" type="button" aria-pressed="false" aria-label="Toggle invert">
            <img src="images/logo_sw.png" alt="">
        </button>
    </header>

    <div class="gallery" id="gallery"></div>

    <div class="lightbox" id="lightbox">
        <button class="lightbox-close" onclick="closeLightbox()">Ã—</button>
        <button class="lightbox-prev" onclick="showPrev()">â€¹</button>
        <button class="lightbox-next" onclick="showNext()">â€º</button>
        <img id="lightbox-img" src="" alt="" draggable="false">
    </div>

    <footer>
        <p>Â© 2025 Shane Wetzel</p>
    </footer>

    <script>
        const photos = [
            'img_1.JPG',
            'img_2.jpeg',
            'img_3.jpeg',
            'img_4.jpeg',
            'img_5.jpeg',
            'img_6.jpeg',
            'img_7.JPG',
            'img_8.JPG',
            'img_9.JPG',
            'img_10.JPG',
            'img_11.jpeg',
            'img_12.jpg',
            'img_13.jpg',
            'img_14.jpg',
            'img_15.jpg',
            'img_16.jpeg',
            'img_17.jpeg',
            'DSC04066.JPG',
            'DSC04133.JPG',
            'IMG_0191.jpeg',
            'IMG_0206.jpeg',
            'IMG_1921.jpeg',
            'IMG_2125.JPG',
            'IMG_2287.jpeg',
            'IMG_2441.jpeg',
            'IMG_2659.jpeg',
            'IMG_2836.jpeg',
            'R0000188.JPG',
            'R0000229.JPG',
            'dedeAA018A.jpg'
        ];

        // Path to images folder
        const imageFolderPath = 'images/';

        const gallery = document.getElementById('gallery');
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightbox-img');

        function syncHeaderHeightVar() {
            const header = document.querySelector('header');
            if (!header) return;
            document.documentElement.style.setProperty('--header-height', `${header.offsetHeight}px`);
        }

        syncHeaderHeightVar();
        window.addEventListener('resize', syncHeaderHeightVar);
        window.addEventListener('orientationchange', syncHeaderHeightVar);

        let currentIndex = 0;

        // Helper to detect mobile device
        function isMobile() {
            return window.matchMedia('(max-width: 640px)').matches;
        }

        // Generate gallery items from the photos array
        photos.forEach((photo, index) => {
            const item = document.createElement('div');
            item.className = 'gallery-item';

            const img = document.createElement('img');
            img.src = imageFolderPath + photo;
            img.alt = '';
            img.draggable = false;

            // Prevent double-tap zoom on mobile
            if (isMobile()) {
                img.addEventListener('touchstart', function(e) {
                    if (e.touches.length > 1) {
                        e.preventDefault();
                    }
                }, { passive: false });
                img.addEventListener('dblclick', function(e) {
                    e.preventDefault();
                });
            }

            item.appendChild(img);
            gallery.appendChild(item);

            // Only allow click to open lightbox on non-mobile
            if (!isMobile()) {
                item.addEventListener('click', function() {
                    currentIndex = index;
                    lightboxImg.src = img.src;
                    lightbox.classList.add('active');
                    document.body.style.overflow = 'hidden';
                });
            }
        });

        // Toggle global invert
        const invertToggle = document.getElementById('invert-toggle');
        invertToggle.addEventListener('click', function() {
            document.body.classList.toggle('global-invert');
            invertToggle.setAttribute('aria-pressed', document.body.classList.contains('global-invert') ? 'true' : 'false');
        });

        function closeLightbox() {
            lightbox.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        function showPrev() {
            currentIndex = (currentIndex - 1 + photos.length) % photos.length;
            lightboxImg.src = imageFolderPath + photos[currentIndex];
        }

        function showNext() {
            currentIndex = (currentIndex + 1) % photos.length;
            lightboxImg.src = imageFolderPath + photos[currentIndex];
        }

        lightbox.addEventListener('click', function(e) {
            if (e.target === lightbox) {
                closeLightbox();
            }
        });

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeLightbox();
            } else if (e.key === 'ArrowLeft') {
                showPrev();
            } else if (e.key === 'ArrowRight') {
                showNext();
            }
        });
    </script>
</body>
</html>